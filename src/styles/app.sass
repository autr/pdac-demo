@import "./_colors"
@import 'svelte-aui/src/styles/utilities.sass'

@import '../../sassis/src/_index'

$width: 100%
$height: 100vh
$topbar: 30px
$fontsize: 18px 
$smallfontsize: 14px

 
@keyframes spin-fwd
	from 
		transform: rotate(0deg)
	to 
		transform: rotate(360deg) 
@keyframes spin-rev
	from 
		transform: rotate(0deg)
	to 
		transform: rotate(-360deg) 


// hostname: background colors...

#pdac, #pdac .overlay, #pdac .header
	background-color: map-get($colors, "blue-grey-900")

main
	position: absolute
	top: 0
	left: 0
	width: 100vw
	height: 100vh
	background: var(--bg)
	display: flex
	flex-direction: column
	justify-content: center 
	align-items: center
#pdac
	+shorthand
	margin: 0 0
	width: 100vw
	height: 100vh
	overflow: auto
	position: relative
	box-sizing: border-box
	display: flex
	justify-content: stretch
	align-items: stretch
	justify-items: stretch
	flex-direction: column
	&.--show-mini
		max-width: 480px
		max-height: 480px
		flex-basis: 480px
		margin: 0.6em
		border: 2px solid var(--fg)
		position: relative
		> *
			max-width: 100%
			width: 100%
	*, *::placeholder, *::-webkit-input-placeholder
		color: var(--fg)

.mb06
	margin-bottom: 0.6em!important

.aui-boolean
	&.active, &:active
		.aui-actual-button > .aui-actual-button-inner 
			background: var(--fg)
			color: var(--bg)
			*
				color: var(--bg)
				fill: var(--bg)

.set-fill
	*
		fill: var(--fg)!important

@each $name, $color in $colors
	#pdac.bg-#{$name}
		background-color: $color
		.overlay, .header
			background-color: $color
		.timer.pulse *, .timer.pulse .txt
			color: $color

::selection, ::-moz-selection
	background: transparent
	color: inherit
*
	-webkit-tap-highlight-color: transparent
	-webkit-touch-callout: none

a, button:not( .aui-toggle button )
	&:active, &:focus, &.active, &.is-down
		background-color: var(--fg)!important
		color: var(--bg)!important
		outline: none
		*
			color: var(--bg)!important
			fill: var(--bg)!important

.header
	&:active
		background-color: var(--fg)!important
		color: var(--bg)!important
		outline: none
		*
			color: var(--bg)!important
			fill: var(--bg)!important

.no-border > .aui-actual-button
	border: none!important
.aui-actual-button, .aui-actual-button-inner
	flex-direction: row!important
	justify-content: stretch!important
	align-items: stretch!important
	text-align: center
	vertical-align: middle

button
	cursor: pointer!important
button a, button .centered
	flex-grow: 1!important

.centered > *
	flex-grow: 0!important

.aui-actual-button-inner
	flex-direction: row!important
	justify-content: center
	align-items: center
	justify-items: center
	gap: 0.4em
	*
		text-align: center
		vertical-align: middle

.aui-dropdown.icon-inset .aui-index-inner
	padding-left: 3em
.aui-dropdown, .aui-dropdown .aui-index-inner
	border-radius: 5px
	// &:active, &.is-down
	// 	background-color: inherit!important
	// 	color: inherit!important
	// 	fill: var(--fg)!important
	// *
	// 	&:active, &.is-down
	// 		background-color: inherit!important
	// 		color: inherit!important
	// 		fill: var(--fg)!important
	// &.active 
	// 	background-color: inherit!important
	// 	color: inherit!important
	// 	outline: none
	// 	*
	// 		color: inherit!important
	// button
	// 	border: 2px solid var(--fg)!important
	// 	> span
	// 		padding: 0.2em 0.6em
	// &.active
	// 	background-color: var(--fg)!important
	// 	color: var(--bg)!important
	// 	fill: var(--bg)!important
	// 	*
	// 		background-color: var(--fg)!important
	// 		color: var(--bg)!important
	// 		fill: var(--bg)!important

// PDAC main...

.cgrow
	> * 
		flex-grow: 1!important
html, *
	font-family: sans-serif
	+fontsize( $fontsize)

#pdac

	.webcam
		position: relative
		overflow: hidden
		video
			object-fit: contain
			height: 100%
		svg
			position: absolute
			top: 50%
			left: 50%
			transform: translate(-50%, -50%)
			width: 100%
			height: 100%
			*
				stroke: var(--fg)!important
	.header
		position: sticky
		width: $width
		height: $topbar
		top: 0
		left: 0
		display: flex 
		justify-content: space-between
		z-index: 101
		font-size: $smallfontsize
		box-sizing: border-box
		line-height: $topbar
		padding: #{ ( $topbar - $smallfontsize ) / 2} 10px
		// font-family: pixel, monospace, sans-serif
		// font-smooth: never!important
		// -webkit-font-smoothing : none!important
		> *
			display: flex
			align-items: center
	.container
		display: flex
		flex-direction: column
		height: auto
		width: 100vw
		min-height: 100%
		margin-top: -$topbar
		padding-top: $topbar
	input[type=text]
		background: transparent
	.keyboard-wrapper
		.aui-text
			margin-bottom: 0px
	.keyboard
		.row
			button
				border-right-width: 0px
				border-bottom-width: 0px
				&:last-child
					border-right-width: 2px
			&:last-child
				button
					border-bottom-width: 2px

	.aui-label
		display: none!important

	select
		padding: 0.5em 0em!important

	input[type=text], input[type=password], input[type=email], .aui-index-inner
		border: 2px solid var(--fg)
	.overlay .spinner span, input[type=text], input[type=password], input[type=email], .aui-index-inner, .aui-button button
		border-color: var(--fg)

	// hostname: text colors...

	// .pdac-main-column
	// 	max-width: 100vw
	// .pdac-main-column > *
	// 	flex-grow: 1
	// 	flex-basis: 50px
	// 	display: flex
	// 	flex-direction: column
	// 	justify-content: center
	// 	a
	// 		display: flex
	// 		flex-grow: 1
	// 		flex-basis: 30px
	// 		padding: 5px 0px
	// 		justify-content: left
	.pdac-main-column a
			&:focus, &:active
				background: var(--fg)
				color: var(--bg)
				*
					color: var(--bg)
					fill: var(--bg)
	@each $name, $color in $colors
		&.txt-#{$name}
			.timer
				&.spin
					border-color: $color
				&.pulse
					.ring
						background: $color
			*, *::placeholder, *::-webkit-input-placeholder
				color: $color
			.overlay .spinner span, input[type=text], input[type=password], input[type=email], .aui-index-inner, .aui-button button, .keyboard button
				border-color: $color


	select
		option
			background-color: map-get($colors, "blue-grey-900")
	::-webkit-scrollbar
		display: none
	#back
		flex-direction: row
		justify-content: left 
		align-items: center
		flex-grow: 0
		flex-basis: 50px
		min-height: 50px
		display: flex
		svg
			display: inline 
	.overlay
		justify-content: center
		.aui-group
			align-items: center
		.aui-flex-button
			width: 100%
		.spinner
			$s: 80px
			margin: 20px
			position: relative
			width: $s * 2
			height: $s * 2 
			max-height: $s * 2 
			display: block
			transform-origin: 50% 50%
			animation: spin-rev 6s infinite linear
			span
				border: 3px solid var(--fg)
				display: block
				position: absolute
				width: $s
				height: $s
				transform-origin: 0 0 
				animation: spin-fwd 4s infinite linear
				left: 0
				top: 0
				box-sizing: border-box
				transform-origin: 50% 50%
				&:nth-child(1)
					left: $s/2
					animation-duration: 4.1s
				&:nth-child(2)
					top: $s/2
					animation-duration: 4.2s
				&:nth-child(3)
					top: $s/2
					left: $s 
					animation-duration: 3.9s
				&:nth-child(4)
					top: $s 
					left: $s/2 
					animation-duration: 4.3s
	.hostname
		padding: 20px
		border-radius: 100%

	a
		text-decoration: none
	.overlay
		position: absolute
		top: 0
		left: 0
		width: 100%
		height: 100%
		display: flex
		z-index: 99
		box-sizing: border-box
		padding: 40px 	
		.aui-column > *
			display: flex
			flex-grow: 1
	&.hide-cursor
		cursor: none!important
		*, a 
			cursor: none!important
	.aui-button
		button
			border: 2px solid var(--fg)
			border-radius: 5px
			a, .centered
				justify-content: center
				align-items: center
				display: flex
				flex-grow: 1
	.grid
		display: grid!important
		justify-content: stretch
		grid-template-columns: repeat(2, minmax(10px, 1fr))
		.aui-flex
			padding: 0!important

	*
		user-select: none


#pdac .konsole, #pdac .terminal
	+terminal-theme
	font-family: monospace
	overflow: scroll